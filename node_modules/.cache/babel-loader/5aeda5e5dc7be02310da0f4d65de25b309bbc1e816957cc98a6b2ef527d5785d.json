{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport \"core-js/modules/es.iterator.for-each.js\";\nimport { ref, computed, onMounted, nextTick } from \"vue\";\nimport { useStore } from \"vuex\";\nimport { useRouter } from \"vue-router\";\nimport * as pdfjsLib from \"pdfjs-dist\";\n\n// 使用CDN worker确保稳定性\npdfjsLib.GlobalWorkerOptions.workerSrc = \"https://cdn.jsdelivr.net/npm/pdfjs-dist@3.4.120/build/pdf.worker.min.js\";\nexport default {\n  name: \"OcrResults\",\n  setup() {\n    const store = useStore();\n    const router = useRouter();\n    const pdfContainer = ref(null);\n    const pdfDoc = ref(null);\n    const activeLineIndex = ref(-1);\n    const pdfCanvases = ref([]);\n\n    // 检查是否有OCR结果\n    const hasOcrResults = computed(() => {\n      return store.state.ocrResults?.pdfUrl && store.state.ocrResults?.text;\n    });\n\n    // LaTeX按行拆分\n    const latexLines = computed(() => {\n      return store.state.ocrResults?.text ? store.state.ocrResults.text.split(\"\\n\").filter(line => line.trim()) : [];\n    });\n\n    // 渲染PDF页\n    const renderPage = async pageNum => {\n      try {\n        const page = await pdfDoc.value.getPage(pageNum);\n        const viewport = page.getViewport({\n          scale: 1.8\n        });\n        const canvas = document.createElement(\"canvas\");\n        const context = canvas.getContext(\"2d\");\n        canvas.width = viewport.width;\n        canvas.height = viewport.height;\n        canvas.className = \"pdf-canvas\";\n        canvas.dataset.page = pageNum;\n        await page.render({\n          canvasContext: context,\n          viewport: viewport\n        }).promise;\n        return canvas;\n      } catch (error) {\n        console.error(\"渲染页面失败:\", error);\n        throw error;\n      }\n    };\n\n    // 渲染所有PDF页面\n    const renderAllPages = async () => {\n      if (!pdfDoc.value || !pdfContainer.value) return;\n      try {\n        pdfContainer.value.innerHTML = \"\";\n        pdfCanvases.value = [];\n        for (let i = 1; i <= pdfDoc.value.numPages; i++) {\n          const canvas = await renderPage(i);\n          pdfContainer.value.appendChild(canvas);\n          pdfCanvases.value.push(canvas);\n\n          // 添加页面间距\n          if (i < pdfDoc.value.numPages) {\n            const spacer = document.createElement(\"div\");\n            spacer.className = \"page-spacer\";\n            pdfContainer.value.appendChild(spacer);\n          }\n        }\n      } catch (error) {\n        console.error(\"渲染PDF失败:\", error);\n      }\n    };\n\n    // 处理行悬停\n    const handleLineHover = async lineIndex => {\n      activeLineIndex.value = lineIndex;\n      if (!pdfContainer.value || latexLines.value.length === 0) return;\n\n      // 计算PDF滚动位置\n      const totalLines = latexLines.value.length;\n      const scrollPercent = lineIndex / totalLines;\n      await nextTick();\n      pdfContainer.value.scrollTop = pdfContainer.value.scrollHeight * scrollPercent;\n\n      // 高亮对应的PDF区域（模拟效果）\n      highlightPdfArea(lineIndex);\n    };\n\n    // 高亮PDF区域（模拟实现）\n    const highlightPdfArea = lineIndex => {\n      // 移除之前的高亮\n      pdfCanvases.value.forEach(canvas => {\n        canvas.style.boxShadow = \"none\";\n        canvas.style.border = \"1px solid #ddd\";\n      });\n\n      // 根据行号确定要高亮的页面（简单模拟）\n      const pageIndex = Math.min(Math.floor(lineIndex / Math.max(1, latexLines.value.length / pdfCanvases.value.length)), pdfCanvases.value.length - 1);\n      if (pdfCanvases.value[pageIndex]) {\n        pdfCanvases.value[pageIndex].style.boxShadow = \"0 0 15px rgba(33, 150, 243, 0.5)\";\n        pdfCanvases.value[pageIndex].style.border = \"2px solid #2196f3\";\n      }\n    };\n\n    // 前往首页上传\n    const goToHome = () => {\n      router.push(\"/\");\n    };\n\n    // 加载PDF\n    onMounted(async () => {\n      if (!hasOcrResults.value) return;\n      const pdfUrl = store.state.ocrResults.pdfUrl;\n      try {\n        // 处理URL\n        const effectiveUrl = pdfUrl.startsWith('http') ? pdfUrl : `${window.location.origin}${pdfUrl}`;\n        const loadingTask = pdfjsLib.getDocument(effectiveUrl);\n        pdfDoc.value = await loadingTask.promise;\n        await renderAllPages();\n      } catch (error) {\n        console.error(\"PDF加载失败:\", error);\n      }\n    });\n    return {\n      pdfContainer,\n      latexLines,\n      activeLineIndex,\n      hasOcrResults,\n      handleLineHover,\n      goToHome\n    };\n  }\n};","map":{"version":3,"names":["ref","computed","onMounted","nextTick","useStore","useRouter","pdfjsLib","GlobalWorkerOptions","workerSrc","name","setup","store","router","pdfContainer","pdfDoc","activeLineIndex","pdfCanvases","hasOcrResults","state","ocrResults","pdfUrl","text","latexLines","split","filter","line","trim","renderPage","pageNum","page","value","getPage","viewport","getViewport","scale","canvas","document","createElement","context","getContext","width","height","className","dataset","render","canvasContext","promise","error","console","renderAllPages","innerHTML","i","numPages","appendChild","push","spacer","handleLineHover","lineIndex","length","totalLines","scrollPercent","scrollTop","scrollHeight","highlightPdfArea","forEach","style","boxShadow","border","pageIndex","Math","min","floor","max","goToHome","effectiveUrl","startsWith","window","location","origin","loadingTask","getDocument"],"sources":["D:\\OCR\\ocr\\src\\views\\Results.vue"],"sourcesContent":["<template>\r\n  <div class=\"results-page\">\r\n    <!-- 导航栏 -->\r\n    <nav class=\"navbar\">\r\n      <div class=\"nav-container\">\r\n        <div class=\"nav-logo\">OCR智能平台</div>\r\n        <div class=\"nav-menu\">\r\n          <a href=\"#\" class=\"nav-item\">首页</a>\r\n          <a href=\"#\" class=\"nav-item\">PDF切割</a>\r\n          <a href=\"#\" class=\"nav-item\">关于我们</a>\r\n        </div>\r\n      </div>\r\n    </nav>\r\n\r\n    <div class=\"results-content\">\r\n      <h2>OCR Results</h2>\r\n\r\n      <!-- 结果容器 -->\r\n      <div v-if=\"hasOcrResults\" class=\"results-container\">\r\n        <!-- 左边 PDF 渲染 -->\r\n        <div class=\"pdf-section\">\r\n          <div ref=\"pdfContainer\" class=\"pdf-viewer\"></div>\r\n        </div>\r\n\r\n        <!-- 右边 Nougat LaTeX 输出 -->\r\n        <div class=\"latex-section\">\r\n          <h3>Nougat LaTeX 输出：</h3>\r\n          <div class=\"latex-viewer\">\r\n            <div\r\n              v-for=\"(line, index) in latexLines\"\r\n              :key=\"index\"\r\n              class=\"latex-line\"\r\n              :class=\"{ 'active': activeLineIndex === index }\"\r\n              @mouseenter=\"handleLineHover(index)\"\r\n              @mouseleave=\"activeLineIndex = -1\"\r\n            >\r\n              <span class=\"line-number\">{{ index + 1 }}</span>\r\n              <span class=\"line-content\">{{ line }}</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- 无结果提示 -->\r\n      <div v-else class=\"no-results-panel\">\r\n        <div class=\"no-results-content\">\r\n          <div class=\"warning-icon\">⚠️</div>\r\n          <h3>No PDF URL found</h3>\r\n          <p>请先上传PDF文件以查看OCR识别结果</p>\r\n          <button class=\"upload-btn\" @click=\"goToHome\">前往上传</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 页脚 -->\r\n    <footer class=\"footer\">\r\n      <div class=\"footer-container\">\r\n        <div class=\"footer-section\">\r\n          <h4>OCR智能平台</h4>\r\n          <p>高效、准确的文字识别解决方案</p>\r\n        </div>\r\n        <div class=\"footer-section\">\r\n          <h4>功能特色</h4>\r\n          <ul>\r\n            <li>图片文字识别</li>\r\n            <li>PDF文档处理</li>\r\n            <li>多语言支持</li>\r\n          </ul>\r\n        </div>\r\n        <div class=\"footer-section\">\r\n          <h4>联系我们</h4>\r\n          <p>Email: support@ocr-platform.com</p>\r\n          <p>技术支持: 400-123-4567</p>\r\n        </div>\r\n      </div>\r\n    </footer>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref, computed, onMounted, nextTick } from \"vue\";\r\nimport { useStore } from \"vuex\";\r\nimport { useRouter } from \"vue-router\";\r\nimport * as pdfjsLib from \"pdfjs-dist\";\r\n\r\n// 使用CDN worker确保稳定性\r\npdfjsLib.GlobalWorkerOptions.workerSrc = \r\n  \"https://cdn.jsdelivr.net/npm/pdfjs-dist@3.4.120/build/pdf.worker.min.js\";\r\n\r\nexport default {\r\n  name: \"OcrResults\",\r\n  setup() {\r\n    const store = useStore();\r\n    const router = useRouter();\r\n    const pdfContainer = ref(null);\r\n    const pdfDoc = ref(null);\r\n    const activeLineIndex = ref(-1);\r\n    const pdfCanvases = ref([]);\r\n\r\n    // 检查是否有OCR结果\r\n    const hasOcrResults = computed(() => {\r\n      return store.state.ocrResults?.pdfUrl && store.state.ocrResults?.text;\r\n    });\r\n\r\n    // LaTeX按行拆分\r\n    const latexLines = computed(() => {\r\n      return store.state.ocrResults?.text\r\n        ? store.state.ocrResults.text.split(\"\\n\").filter(line => line.trim())\r\n        : [];\r\n    });\r\n\r\n    // 渲染PDF页\r\n    const renderPage = async (pageNum) => {\r\n      try {\r\n        const page = await pdfDoc.value.getPage(pageNum);\r\n        const viewport = page.getViewport({ scale: 1.8 });\r\n        \r\n        const canvas = document.createElement(\"canvas\");\r\n        const context = canvas.getContext(\"2d\");\r\n        canvas.width = viewport.width;\r\n        canvas.height = viewport.height;\r\n        canvas.className = \"pdf-canvas\";\r\n        canvas.dataset.page = pageNum;\r\n\r\n        await page.render({\r\n          canvasContext: context,\r\n          viewport: viewport\r\n        }).promise;\r\n\r\n        return canvas;\r\n      } catch (error) {\r\n        console.error(\"渲染页面失败:\", error);\r\n        throw error;\r\n      }\r\n    };\r\n\r\n    // 渲染所有PDF页面\r\n    const renderAllPages = async () => {\r\n      if (!pdfDoc.value || !pdfContainer.value) return;\r\n\r\n      try {\r\n        pdfContainer.value.innerHTML = \"\";\r\n        pdfCanvases.value = [];\r\n\r\n        for (let i = 1; i <= pdfDoc.value.numPages; i++) {\r\n          const canvas = await renderPage(i);\r\n          pdfContainer.value.appendChild(canvas);\r\n          pdfCanvases.value.push(canvas);\r\n\r\n          // 添加页面间距\r\n          if (i < pdfDoc.value.numPages) {\r\n            const spacer = document.createElement(\"div\");\r\n            spacer.className = \"page-spacer\";\r\n            pdfContainer.value.appendChild(spacer);\r\n          }\r\n        }\r\n      } catch (error) {\r\n        console.error(\"渲染PDF失败:\", error);\r\n      }\r\n    };\r\n\r\n    // 处理行悬停\r\n    const handleLineHover = async (lineIndex) => {\r\n      activeLineIndex.value = lineIndex;\r\n      \r\n      if (!pdfContainer.value || latexLines.value.length === 0) return;\r\n\r\n      // 计算PDF滚动位置\r\n      const totalLines = latexLines.value.length;\r\n      const scrollPercent = lineIndex / totalLines;\r\n      \r\n      await nextTick();\r\n      pdfContainer.value.scrollTop = pdfContainer.value.scrollHeight * scrollPercent;\r\n\r\n      // 高亮对应的PDF区域（模拟效果）\r\n      highlightPdfArea(lineIndex);\r\n    };\r\n\r\n    // 高亮PDF区域（模拟实现）\r\n    const highlightPdfArea = (lineIndex) => {\r\n      // 移除之前的高亮\r\n      pdfCanvases.value.forEach(canvas => {\r\n        canvas.style.boxShadow = \"none\";\r\n        canvas.style.border = \"1px solid #ddd\";\r\n      });\r\n\r\n      // 根据行号确定要高亮的页面（简单模拟）\r\n      const pageIndex = Math.min(\r\n        Math.floor(lineIndex / Math.max(1, latexLines.value.length / pdfCanvases.value.length)),\r\n        pdfCanvases.value.length - 1\r\n      );\r\n\r\n      if (pdfCanvases.value[pageIndex]) {\r\n        pdfCanvases.value[pageIndex].style.boxShadow = \"0 0 15px rgba(33, 150, 243, 0.5)\";\r\n        pdfCanvases.value[pageIndex].style.border = \"2px solid #2196f3\";\r\n      }\r\n    };\r\n\r\n    // 前往首页上传\r\n    const goToHome = () => {\r\n      router.push(\"/\");\r\n    };\r\n\r\n    // 加载PDF\r\n    onMounted(async () => {\r\n      if (!hasOcrResults.value) return;\r\n\r\n      const pdfUrl = store.state.ocrResults.pdfUrl;\r\n      \r\n      try {\r\n        // 处理URL\r\n        const effectiveUrl = pdfUrl.startsWith('http') \r\n          ? pdfUrl \r\n          : `${window.location.origin}${pdfUrl}`;\r\n\r\n        const loadingTask = pdfjsLib.getDocument(effectiveUrl);\r\n        pdfDoc.value = await loadingTask.promise;\r\n        await renderAllPages();\r\n      } catch (error) {\r\n        console.error(\"PDF加载失败:\", error);\r\n      }\r\n    });\r\n\r\n    return {\r\n      pdfContainer,\r\n      latexLines,\r\n      activeLineIndex,\r\n      hasOcrResults,\r\n      handleLineHover,\r\n      goToHome\r\n    };\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.results-page {\r\n  min-height: 100vh;\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n/* 导航栏样式 */\r\n.navbar {\r\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\r\n  padding: 1rem 0;\r\n  color: white;\r\n}\r\n\r\n.nav-container {\r\n  max-width: 1200px;\r\n  margin: 0 auto;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding: 0 2rem;\r\n}\r\n\r\n.nav-logo {\r\n  font-size: 1.5rem;\r\n  font-weight: bold;\r\n}\r\n\r\n.nav-menu {\r\n  display: flex;\r\n  gap: 2rem;\r\n}\r\n\r\n.nav-item {\r\n  color: white;\r\n  text-decoration: none;\r\n  padding: 0.5rem 1rem;\r\n  border-radius: 5px;\r\n  transition: background-color 0.3s;\r\n}\r\n\r\n.nav-item:hover {\r\n  background-color: rgba(255, 255, 255, 0.1);\r\n}\r\n\r\n/* 主要内容 */\r\n.results-content {\r\n  flex: 1;\r\n  max-width: 1200px;\r\n  margin: 2rem auto;\r\n  padding: 0 2rem;\r\n}\r\n\r\n.results-content h2 {\r\n  text-align: center;\r\n  color: #333;\r\n  margin-bottom: 2rem;\r\n  font-size: 2rem;\r\n}\r\n\r\n/* 结果容器 */\r\n.results-container {\r\n  display: grid;\r\n  grid-template-columns: 1fr 1fr;\r\n  gap: 2rem;\r\n  height: 70vh;\r\n}\r\n\r\n/* PDF区域 */\r\n.pdf-section {\r\n  border: 2px solid #e0e0e0;\r\n  border-radius: 10px;\r\n  overflow: hidden;\r\n  background: #fafafa;\r\n}\r\n\r\n.pdf-viewer {\r\n  height: 100%;\r\n  overflow-y: auto;\r\n  padding: 1rem;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  gap: 1rem;\r\n}\r\n\r\n.pdf-canvas {\r\n  border: 1px solid #ddd;\r\n  border-radius: 5px;\r\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.page-spacer {\r\n  height: 1rem;\r\n}\r\n\r\n/* LaTeX区域 */\r\n.latex-section {\r\n  border: 2px solid #e0e0e0;\r\n  border-radius: 10px;\r\n  overflow: hidden;\r\n  background: white;\r\n}\r\n\r\n.latex-section h3 {\r\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\r\n  color: white;\r\n  margin: 0;\r\n  padding: 1rem;\r\n  font-size: 1.2rem;\r\n}\r\n\r\n.latex-viewer {\r\n  height: calc(100% - 60px);\r\n  overflow-y: auto;\r\n  padding: 0.5rem;\r\n}\r\n\r\n.latex-line {\r\n  display: flex;\r\n  align-items: flex-start;\r\n  padding: 0.5rem;\r\n  border-bottom: 1px solid #f0f0f0;\r\n  cursor: pointer;\r\n  transition: all 0.2s ease;\r\n  font-family: 'Courier New', monospace;\r\n  font-size: 13px;\r\n  line-height: 1.5;\r\n}\r\n\r\n.latex-line:hover {\r\n  background-color: #e3f2fd;\r\n  transform: translateX(5px);\r\n}\r\n\r\n.latex-line.active {\r\n  background-color: #bbdefb;\r\n  border-left: 4px solid #2196f3;\r\n}\r\n\r\n.line-number {\r\n  min-width: 30px;\r\n  color: #666;\r\n  font-size: 11px;\r\n  padding-right: 0.5rem;\r\n  user-select: none;\r\n}\r\n\r\n.line-content {\r\n  flex: 1;\r\n  white-space: pre-wrap;\r\n  word-break: break-all;\r\n}\r\n\r\n/* 无结果提示 */\r\n.no-results-panel {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  height: 50vh;\r\n}\r\n\r\n.no-results-content {\r\n  text-align: center;\r\n  padding: 2rem;\r\n  border: 2px dashed #ff9800;\r\n  border-radius: 10px;\r\n  background: #fff3e0;\r\n}\r\n\r\n.warning-icon {\r\n  font-size: 3rem;\r\n  margin-bottom: 1rem;\r\n}\r\n\r\n.no-results-content h3 {\r\n  color: #f57c00;\r\n  margin-bottom: 1rem;\r\n}\r\n\r\n.upload-btn {\r\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\r\n  color: white;\r\n  border: none;\r\n  padding: 0.8rem 2rem;\r\n  border-radius: 5px;\r\n  cursor: pointer;\r\n  font-size: 1rem;\r\n  margin-top: 1rem;\r\n  transition: transform 0.2s;\r\n}\r\n\r\n.upload-btn:hover {\r\n  transform: translateY(-2px);\r\n}\r\n\r\n/* 页脚 */\r\n.footer {\r\n  background: #1a237e;\r\n  color: white;\r\n  padding: 2rem 0;\r\n  margin-top: auto;\r\n}\r\n\r\n.footer-container {\r\n  max-width: 1200px;\r\n  margin: 0 auto;\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));\r\n  gap: 2rem;\r\n  padding: 0 2rem;\r\n}\r\n\r\n.footer-section h4 {\r\n  margin-bottom: 1rem;\r\n  color: #bbdefb;\r\n}\r\n\r\n.footer-section ul {\r\n  list-style: none;\r\n  padding: 0;\r\n}\r\n\r\n.footer-section ul li {\r\n  margin-bottom: 0.5rem;\r\n}\r\n\r\n/* 响应式设计 */\r\n@media (max-width: 768px) {\r\n  .results-container {\r\n    grid-template-columns: 1fr;\r\n    height: auto;\r\n  }\r\n  \r\n  .pdf-section,\r\n  .latex-section {\r\n    height: 50vh;\r\n  }\r\n  \r\n  .nav-container {\r\n    flex-direction: column;\r\n    gap: 1rem;\r\n  }\r\n  \r\n  .footer-container {\r\n    grid-template-columns: 1fr;\r\n  }\r\n}\r\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}